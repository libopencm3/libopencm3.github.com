<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libopencm3: FDCAN peripheral API</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">libopencm3
   </div>
   <div id="projectbrief">A free/libre/open-source firmware library for various ARM Cortex-M3 microcontrollers.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('group__fdcan__file.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">FDCAN peripheral API<div class="ingroups"><a class="el" href="group__peripheral__apis.html">Peripheral APIs</a></div></div></div>
</div><!--header-->
<div class="contents">

<p><b>libopencm3 STM32 FDCAN</b>  
<a href="#details">More...</a></p>
<div class="dynheader">
Collaboration diagram for FDCAN peripheral API:</div>
<div class="dyncontent">
<div class="center"><img src="group__fdcan__file.png" border="0" usemap="#agroup____fdcan____file" alt=""/></div>
<map name="agroup____fdcan____file" id="agroup____fdcan____file">
<area shape="rect" title="libopencm3 STM32 FDCAN" alt="" coords="173,5,336,31"/>
<area shape="rect" href="group__peripheral__apis.html" title="APIs for device peripherals." alt="" coords="5,5,125,31"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gaadf44bf8c869482440f0805d11f99476"><td class="memItemLeft" align="right" valign="top">unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fdcan__file.html#gaadf44bf8c869482440f0805d11f99476">fdcan_get_fifo_element_size</a> (uint32_t canport, unsigned fifo_id)</td></tr>
<tr class="memdesc:gaadf44bf8c869482440f0805d11f99476"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns actual size of FIFO entry in FIFO for given CAN port and FIFO.  <a href="group__fdcan__file.html#gaadf44bf8c869482440f0805d11f99476">More...</a><br /></td></tr>
<tr class="separator:gaadf44bf8c869482440f0805d11f99476"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf61aace89b3ea31afd3614922ff591ca"><td class="memItemLeft" align="right" valign="top">unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fdcan__file.html#gaf61aace89b3ea31afd3614922ff591ca">fdcan_get_txbuf_element_size</a> (uint32_t canport)</td></tr>
<tr class="memdesc:gaf61aace89b3ea31afd3614922ff591ca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns actual size of transmit entry in transmit queue/FIFO for given CAN port.  <a href="group__fdcan__file.html#gaf61aace89b3ea31afd3614922ff591ca">More...</a><br /></td></tr>
<tr class="separator:gaf61aace89b3ea31afd3614922ff591ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga77b9ccd57eb2d38cc7ec23706c093d0c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fdcan__file.html#ga77b9ccd57eb2d38cc7ec23706c093d0c">fdcan_init_std_filter_ram</a> (uint32_t canport, uint32_t flssa, uint8_t lss)</td></tr>
<tr class="memdesc:ga77b9ccd57eb2d38cc7ec23706c093d0c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize allocation of standard filter block in CAN message RAM.  <a href="group__fdcan__file.html#ga77b9ccd57eb2d38cc7ec23706c093d0c">More...</a><br /></td></tr>
<tr class="separator:ga77b9ccd57eb2d38cc7ec23706c093d0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa1a343c660e01e6582cd585db31bf04d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fdcan__file.html#gaa1a343c660e01e6582cd585db31bf04d">fdcan_init_ext_filter_ram</a> (uint32_t canport, uint32_t flesa, uint8_t lse)</td></tr>
<tr class="memdesc:gaa1a343c660e01e6582cd585db31bf04d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize allocation of extended filter block in CAN message RAM.  <a href="group__fdcan__file.html#gaa1a343c660e01e6582cd585db31bf04d">More...</a><br /></td></tr>
<tr class="separator:gaa1a343c660e01e6582cd585db31bf04d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0983f9183802804a157b56f9bab6e19e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fdcan__file.html#ga0983f9183802804a157b56f9bab6e19e">fdcan_init_fifo_ram</a> (uint32_t canport, unsigned fifo_id, uint32_t fxsa, uint8_t fxs)</td></tr>
<tr class="memdesc:ga0983f9183802804a157b56f9bab6e19e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize allocation of FIFO block in CAN message RAM.  <a href="group__fdcan__file.html#ga0983f9183802804a157b56f9bab6e19e">More...</a><br /></td></tr>
<tr class="separator:ga0983f9183802804a157b56f9bab6e19e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga004764aec240d40e03773129c6d8b734"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fdcan__file.html#ga004764aec240d40e03773129c6d8b734">fdcan_init_tx_event_ram</a> (uint32_t canport, uint32_t tesa, uint8_t tes)</td></tr>
<tr class="memdesc:ga004764aec240d40e03773129c6d8b734"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize allocation of transmit event block in CAN message RAM.  <a href="group__fdcan__file.html#ga004764aec240d40e03773129c6d8b734">More...</a><br /></td></tr>
<tr class="separator:ga004764aec240d40e03773129c6d8b734"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga85878e033913a5901cf7b87adb142b05"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fdcan__file.html#ga85878e033913a5901cf7b87adb142b05">fdcan_init_tx_buffer_ram</a> (uint32_t canport, uint32_t tbsa, uint8_t tbs)</td></tr>
<tr class="memdesc:ga85878e033913a5901cf7b87adb142b05"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize allocation of transmit queue block in CAN message RAM.  <a href="group__fdcan__file.html#ga85878e033913a5901cf7b87adb142b05">More...</a><br /></td></tr>
<tr class="separator:ga85878e033913a5901cf7b87adb142b05"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga02e16aa4f82067b119e6c1262ffae476"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fdcan__file.html#ga02e16aa4f82067b119e6c1262ffae476">fdcan_set_rx_element_size</a> (uint32_t canport, uint8_t rxbuf, uint8_t rxfifo0, uint8_t rxfifo1)</td></tr>
<tr class="memdesc:ga02e16aa4f82067b119e6c1262ffae476"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize size of data fields in reception buffers.  <a href="group__fdcan__file.html#ga02e16aa4f82067b119e6c1262ffae476">More...</a><br /></td></tr>
<tr class="separator:ga02e16aa4f82067b119e6c1262ffae476"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9d9b1dd105ee715c09d001534577f188"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fdcan__file.html#ga9d9b1dd105ee715c09d001534577f188">fdcan_set_tx_element_size</a> (uint32_t canport, uint8_t txbuf)</td></tr>
<tr class="memdesc:ga9d9b1dd105ee715c09d001534577f188"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize size of data fields in transmit buffers.  <a href="group__fdcan__file.html#ga9d9b1dd105ee715c09d001534577f188">More...</a><br /></td></tr>
<tr class="separator:ga9d9b1dd105ee715c09d001534577f188"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaafd287821ee13b95b633e031247957b2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fdcan__file.html#gaafd287821ee13b95b633e031247957b2">fdcan_init_filter</a> (uint32_t canport, uint8_t std_filt, uint8_t ext_filt)</td></tr>
<tr class="memdesc:gaafd287821ee13b95b633e031247957b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configure amount of filters and initialize filtering block.  <a href="group__fdcan__file.html#gaafd287821ee13b95b633e031247957b2">More...</a><br /></td></tr>
<tr class="separator:gaafd287821ee13b95b633e031247957b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga24ca46499dbb8dc4b116b390bfe75fd1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fdcan__file.html#ga24ca46499dbb8dc4b116b390bfe75fd1">fdcan_start</a> (uint32_t canport, uint32_t timeout)</td></tr>
<tr class="memdesc:ga24ca46499dbb8dc4b116b390bfe75fd1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable FDCAN operation after FDCAN block has been set up.  <a href="group__fdcan__file.html#ga24ca46499dbb8dc4b116b390bfe75fd1">More...</a><br /></td></tr>
<tr class="separator:ga24ca46499dbb8dc4b116b390bfe75fd1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga20a3a6969918dce6b337613fc3f76b79"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fdcan__file.html#ga20a3a6969918dce6b337613fc3f76b79">fdcan_set_fifo_locked_mode</a> (uint32_t canport, bool locked)</td></tr>
<tr class="memdesc:ga20a3a6969918dce6b337613fc3f76b79"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configure FDCAN FIFO lock mode.  <a href="group__fdcan__file.html#ga20a3a6969918dce6b337613fc3f76b79">More...</a><br /></td></tr>
<tr class="separator:ga20a3a6969918dce6b337613fc3f76b79"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga06b7c69884ed9878123ec3892984452f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fdcan__file.html#ga06b7c69884ed9878123ec3892984452f">fdcan_init</a> (uint32_t canport, uint32_t timeout)</td></tr>
<tr class="memdesc:ga06b7c69884ed9878123ec3892984452f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Put FDCAN block into INIT mode for setup.  <a href="group__fdcan__file.html#ga06b7c69884ed9878123ec3892984452f">More...</a><br /></td></tr>
<tr class="separator:ga06b7c69884ed9878123ec3892984452f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafdbf35157b3e249f948446d4a7159d36"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fdcan__file.html#gafdbf35157b3e249f948446d4a7159d36">fdcan_set_can</a> (uint32_t canport, bool auto_retry_disable, bool rx_fifo_locked, bool tx_queue_mode, bool silent, uint32_t n_sjw, uint32_t n_ts1, uint32_t n_ts2, uint32_t n_br_presc)</td></tr>
<tr class="memdesc:gafdbf35157b3e249f948446d4a7159d36"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set essential FDCAN block parameters for plain CAN operation.  <a href="group__fdcan__file.html#gafdbf35157b3e249f948446d4a7159d36">More...</a><br /></td></tr>
<tr class="separator:gafdbf35157b3e249f948446d4a7159d36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga75fe53bbb8689c9eac3341b14fe7fd2c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fdcan__file.html#ga75fe53bbb8689c9eac3341b14fe7fd2c">fdcan_set_fdcan</a> (uint32_t canport, bool brs_enable, bool fd_op_enable, uint32_t f_sjw, uint32_t f_ts1, uint32_t f_ts2, uint32_t f_br_presc)</td></tr>
<tr class="memdesc:ga75fe53bbb8689c9eac3341b14fe7fd2c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set FDCAN block parameters for FDCAN transmission.  <a href="group__fdcan__file.html#ga75fe53bbb8689c9eac3341b14fe7fd2c">More...</a><br /></td></tr>
<tr class="separator:ga75fe53bbb8689c9eac3341b14fe7fd2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5143b049b7967f4ef6093344b9e0bc7a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fdcan__file.html#ga5143b049b7967f4ef6093344b9e0bc7a">fdcan_set_test</a> (uint32_t canport, bool testing, bool loopback)</td></tr>
<tr class="memdesc:ga5143b049b7967f4ef6093344b9e0bc7a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set FDCAN block testing features.  <a href="group__fdcan__file.html#ga5143b049b7967f4ef6093344b9e0bc7a">More...</a><br /></td></tr>
<tr class="separator:ga5143b049b7967f4ef6093344b9e0bc7a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaad5478106451d7495f3f8fa90fc6b238"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fdcan__file.html#gaad5478106451d7495f3f8fa90fc6b238">fdcan_get_init_state</a> (uint32_t canport)</td></tr>
<tr class="memdesc:gaad5478106451d7495f3f8fa90fc6b238"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return current FDCAN block operation state.  <a href="group__fdcan__file.html#gaad5478106451d7495f3f8fa90fc6b238">More...</a><br /></td></tr>
<tr class="separator:gaad5478106451d7495f3f8fa90fc6b238"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4e641cc685f276d9a20cd26ff121d906"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fdcan__file.html#ga4e641cc685f276d9a20cd26ff121d906">fdcan_set_std_filter</a> (uint32_t canport, uint32_t nr, uint8_t id_list_mode, uint32_t id1, uint32_t id2, uint8_t action)</td></tr>
<tr class="memdesc:ga4e641cc685f276d9a20cd26ff121d906"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configure filter rule for standard ID frames.  <a href="group__fdcan__file.html#ga4e641cc685f276d9a20cd26ff121d906">More...</a><br /></td></tr>
<tr class="separator:ga4e641cc685f276d9a20cd26ff121d906"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab1a2c58b939230b7f866a82f7306ae5b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fdcan__file.html#gab1a2c58b939230b7f866a82f7306ae5b">fdcan_set_ext_filter</a> (uint32_t canport, uint32_t nr, uint8_t id_list_mode, uint32_t id1, uint32_t id2, uint8_t action)</td></tr>
<tr class="memdesc:gab1a2c58b939230b7f866a82f7306ae5b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configure filter rule for extended ID frames.  <a href="group__fdcan__file.html#gab1a2c58b939230b7f866a82f7306ae5b">More...</a><br /></td></tr>
<tr class="separator:gab1a2c58b939230b7f866a82f7306ae5b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae1d9e017700d67ce1438f5a1b48be86c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fdcan__file.html#gae1d9e017700d67ce1438f5a1b48be86c">fdcan_transmit</a> (uint32_t canport, uint32_t id, bool ext, bool rtr, bool fdcan_fmt, bool btr_switch, uint8_t length, const uint8_t *data)</td></tr>
<tr class="memdesc:gae1d9e017700d67ce1438f5a1b48be86c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Transmit Message using FDCAN.  <a href="group__fdcan__file.html#gae1d9e017700d67ce1438f5a1b48be86c">More...</a><br /></td></tr>
<tr class="separator:gae1d9e017700d67ce1438f5a1b48be86c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6be35ed6bbbcb40afeda8ceb178a6583"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fdcan__file.html#ga6be35ed6bbbcb40afeda8ceb178a6583">fdcan_receive</a> (uint32_t canport, uint8_t fifo_id, bool release, uint32_t *id, bool *ext, bool *rtr, uint8_t *fmi, uint8_t *length, uint8_t *data, uint16_t *timestamp)</td></tr>
<tr class="memdesc:ga6be35ed6bbbcb40afeda8ceb178a6583"><td class="mdescLeft">&#160;</td><td class="mdescRight">Receive Message from FDCAN FIFO.  <a href="group__fdcan__file.html#ga6be35ed6bbbcb40afeda8ceb178a6583">More...</a><br /></td></tr>
<tr class="separator:ga6be35ed6bbbcb40afeda8ceb178a6583"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3ed60528070b6a8a3aa79a570b651e14"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fdcan__file.html#ga3ed60528070b6a8a3aa79a570b651e14">fdcan_release_fifo</a> (uint32_t canport, uint8_t fifo_id)</td></tr>
<tr class="memdesc:ga3ed60528070b6a8a3aa79a570b651e14"><td class="mdescLeft">&#160;</td><td class="mdescRight">Release receive oldest FIFO entry.  <a href="group__fdcan__file.html#ga3ed60528070b6a8a3aa79a570b651e14">More...</a><br /></td></tr>
<tr class="separator:ga3ed60528070b6a8a3aa79a570b651e14"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaab9e3279d77a3a7fceddabbd29a9508e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fdcan__file.html#gaab9e3279d77a3a7fceddabbd29a9508e">fdcan_enable_irq</a> (uint32_t canport, uint32_t irq)</td></tr>
<tr class="memdesc:gaab9e3279d77a3a7fceddabbd29a9508e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable IRQ from FDCAN block.  <a href="group__fdcan__file.html#gaab9e3279d77a3a7fceddabbd29a9508e">More...</a><br /></td></tr>
<tr class="separator:gaab9e3279d77a3a7fceddabbd29a9508e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga382050bc9202ed003b0e1e2afc5aa372"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fdcan__file.html#ga382050bc9202ed003b0e1e2afc5aa372">fdcan_disable_irq</a> (uint32_t canport, uint32_t irq)</td></tr>
<tr class="memdesc:ga382050bc9202ed003b0e1e2afc5aa372"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disable IRQ from FDCAN block.  <a href="group__fdcan__file.html#ga382050bc9202ed003b0e1e2afc5aa372">More...</a><br /></td></tr>
<tr class="separator:ga382050bc9202ed003b0e1e2afc5aa372"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga27e7288f4fe07b058c4c8e4f8776b012"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fdcan__file.html#ga27e7288f4fe07b058c4c8e4f8776b012">fdcan_available_tx</a> (uint32_t canport)</td></tr>
<tr class="memdesc:ga27e7288f4fe07b058c4c8e4f8776b012"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if there is free transmit buffer.  <a href="group__fdcan__file.html#ga27e7288f4fe07b058c4c8e4f8776b012">More...</a><br /></td></tr>
<tr class="separator:ga27e7288f4fe07b058c4c8e4f8776b012"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga79bb5d71e31a4252b32269c006fd25f7"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fdcan__file.html#ga79bb5d71e31a4252b32269c006fd25f7">fdcan_available_rx</a> (uint32_t canport, uint8_t fifo)</td></tr>
<tr class="memdesc:ga79bb5d71e31a4252b32269c006fd25f7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tell if there is message waiting in receive FIFO.  <a href="group__fdcan__file.html#ga79bb5d71e31a4252b32269c006fd25f7">More...</a><br /></td></tr>
<tr class="separator:ga79bb5d71e31a4252b32269c006fd25f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p ><b>libopencm3 STM32 FDCAN</b> </p>
<dl class="section version"><dt>Version</dt><dd>1.0.0</dd></dl>
<dl class="section author"><dt>Author</dt><dd> &copy;  2021 Eduard Drusa &lt;ventyl86 at netkosice dot sk&gt;</dd></dl>
<p>Device is equipped with two FDCAN peripherals residing in one FDCAN block. The peripherals support both CAN 2.0 A and B standard and Bosch FDCAN standard. FDCAN frame format and bitrate switching is supported. The peripheral has several filters for incoming messages that can be distributed between two FIFOs and transmit buffer all of configurable amount of entries. For transmitted messages it is possible to opt for event notification once message is transmitted.</p>
<p >The FDCAN peripheral present in STM32 H7 is a superset of FDCAN peripheral found in other MCUs such as STM32 G4. It allows more fine-grade control over buffer and filter allocation and supports TTCAN on CAN1, etc. This driver provides source-level backwards compatible implementation of driver, which allows build of unmodified software originally written for STM32 G4 on STM32 H7.</p>
<p >LGPL License Terms <a class="el" href="lgpl_license.html">libopencm3 License</a> </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga79bb5d71e31a4252b32269c006fd25f7" name="ga79bb5d71e31a4252b32269c006fd25f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga79bb5d71e31a4252b32269c006fd25f7">&#9670;&nbsp;</a></span>fdcan_available_rx()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool fdcan_available_rx </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>canport</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>fifo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Tell if there is message waiting in receive FIFO. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">canport</td><td>FDCAN port. See <a class="el" href="group__fdcan__block.html">FDCAN block base addresses</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fifo</td><td>Rx FIFO number, 0 or 1 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if there is at least one message waiting in given receive FIFO, false otherwise. </dd></dl>

<p class="definition">Definition at line <a class="el" href="fdcan__common_8c_source.html#l00687">687</a> of file <a class="el" href="fdcan__common_8c_source.html">fdcan_common.c</a>.</p>

<p class="reference">References <a class="el" href="h7_2fdcan_8h_source.html#l00209">FDCAN_RXFIFO_FL_MASK</a>, <a class="el" href="fdcan_8h_source.html#l00362">FDCAN_RXFIFO_FL_SHIFT</a>, and <a class="el" href="fdcan_8h_source.html#l00070">FDCAN_RXFIS</a>.</p>

</div>
</div>
<a id="ga27e7288f4fe07b058c4c8e4f8776b012" name="ga27e7288f4fe07b058c4c8e4f8776b012"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga27e7288f4fe07b058c4c8e4f8776b012">&#9670;&nbsp;</a></span>fdcan_available_tx()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool fdcan_available_tx </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>canport</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check if there is free transmit buffer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">canport</td><td>FDCAN port. See <a class="el" href="group__fdcan__block.html">FDCAN block base addresses</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if there is at least one free transmit buffer for new message to be sent, false otherwise. </dd></dl>

<p class="definition">Definition at line <a class="el" href="fdcan__common_8c_source.html#l00675">675</a> of file <a class="el" href="fdcan__common_8c_source.html">fdcan_common.c</a>.</p>

<p class="reference">References <a class="el" href="fdcan_8h_source.html#l00746">FDCAN_E_BUSY</a>, and <a class="el" href="fdcan__common_8c_source.html#l00085">fdcan_get_free_txbuf()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__fdcan__file_ga27e7288f4fe07b058c4c8e4f8776b012_cgraph.png" border="0" usemap="#agroup__fdcan__file_ga27e7288f4fe07b058c4c8e4f8776b012_cgraph" alt=""/></div>
<map name="agroup__fdcan__file_ga27e7288f4fe07b058c4c8e4f8776b012_cgraph" id="agroup__fdcan__file_ga27e7288f4fe07b058c4c8e4f8776b012_cgraph">
<area shape="rect" title="Check if there is free transmit buffer." alt="" coords="5,5,151,32"/>
<area shape="rect" href="fdcan__common_8c.html#a2beb314599de4ada79e9d6dd97d7bde8" title="Return ID of next free Tx buffer." alt="" coords="199,5,359,32"/>
</map>
</div>

</div>
</div>
<a id="ga382050bc9202ed003b0e1e2afc5aa372" name="ga382050bc9202ed003b0e1e2afc5aa372"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga382050bc9202ed003b0e1e2afc5aa372">&#9670;&nbsp;</a></span>fdcan_disable_irq()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fdcan_disable_irq </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>canport</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>irq</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Disable IRQ from FDCAN block. </p>
<p >This routine configures FDCAN to disable certain IRQ. Each FDCAN block supports two IRQs.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">canport</td><td>FDCAN block base address. See <a class="el" href="group__fdcan__block.html">FDCAN block base addresses</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">irq</td><td>number of IRQ to be enabled (currently 0 or 1) </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="fdcan__common_8c_source.html#l00664">664</a> of file <a class="el" href="fdcan__common_8c_source.html">fdcan_common.c</a>.</p>

<p class="reference">References <a class="el" href="fdcan_8h_source.html#l00063">FDCAN_ILE</a>, <a class="el" href="fdcan_8h_source.html#l00338">FDCAN_ILE_INT0</a>, and <a class="el" href="fdcan_8h_source.html#l00339">FDCAN_ILE_INT1</a>.</p>

</div>
</div>
<a id="gaab9e3279d77a3a7fceddabbd29a9508e" name="gaab9e3279d77a3a7fceddabbd29a9508e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaab9e3279d77a3a7fceddabbd29a9508e">&#9670;&nbsp;</a></span>fdcan_enable_irq()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fdcan_enable_irq </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>canport</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>irq</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enable IRQ from FDCAN block. </p>
<p >This routine configures FDCAN to enable certain IRQ. Each FDCAN block supports two IRQs.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">canport</td><td>FDCAN block base address. See <a class="el" href="group__fdcan__block.html">FDCAN block base addresses</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">irq</td><td>number of IRQ to be enabled (currently 0 or 1) </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="fdcan__common_8c_source.html#l00651">651</a> of file <a class="el" href="fdcan__common_8c_source.html">fdcan_common.c</a>.</p>

<p class="reference">References <a class="el" href="fdcan_8h_source.html#l00063">FDCAN_ILE</a>, <a class="el" href="fdcan_8h_source.html#l00338">FDCAN_ILE_INT0</a>, and <a class="el" href="fdcan_8h_source.html#l00339">FDCAN_ILE_INT1</a>.</p>

</div>
</div>
<a id="gaadf44bf8c869482440f0805d11f99476" name="gaadf44bf8c869482440f0805d11f99476"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaadf44bf8c869482440f0805d11f99476">&#9670;&nbsp;</a></span>fdcan_get_fifo_element_size()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned fdcan_get_fifo_element_size </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>canport</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>fifo_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns actual size of FIFO entry in FIFO for given CAN port and FIFO. </p>
<p >Obtains value of FIFO entry length. This value covers both fixed-size frame header block and payload buffer. User can configure payload buffer size individually for each FIFO and designated RX buffer.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">canport</td><td>FDCAN block base address. See <a class="el" href="group__fdcan__block.html">FDCAN block base addresses</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fifo_id</td><td>ID of FIFO whole length is queried. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Length of FIFO entry length covering frame header and frame payload. </dd></dl>

<p class="definition">Definition at line <a class="el" href="fdcan_8c_source.html#l00072">72</a> of file <a class="el" href="fdcan_8c_source.html">fdcan.c</a>.</p>

<p class="reference">References <a class="el" href="fdcan__common_8c_source.html#l00221">fdcan_dlc_to_length()</a>, <a class="el" href="h7_2fdcan_8h_source.html#l00069">FDCAN_RXESC</a>, <a class="el" href="h7_2fdcan_8h_source.html#l00198">FDCAN_RXESC_F0DS_MASK</a>, <a class="el" href="h7_2fdcan_8h_source.html#l00199">FDCAN_RXESC_F0DS_SHIFT</a>, and <a class="el" href="h7_2fdcan_8h_source.html#l00203">FDCAN_RXESC_F1DS_SHIFT</a>.</p>

<p class="reference">Referenced by <a class="el" href="fdcan__common_8c_source.html#l00150">fdcan_get_rxfifo_addr()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__fdcan__file_gaadf44bf8c869482440f0805d11f99476_cgraph.png" border="0" usemap="#agroup__fdcan__file_gaadf44bf8c869482440f0805d11f99476_cgraph" alt=""/></div>
<map name="agroup__fdcan__file_gaadf44bf8c869482440f0805d11f99476_cgraph" id="agroup__fdcan__file_gaadf44bf8c869482440f0805d11f99476_cgraph">
<area shape="rect" title="Returns actual size of FIFO entry in FIFO for given CAN port and FIFO." alt="" coords="5,5,213,32"/>
<area shape="rect" href="fdcan__common_8c.html#a17446d188c22a8af68cc52f73471bb0a" title="Converts DLC value into frame payload length." alt="" coords="261,5,413,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__fdcan__file_gaadf44bf8c869482440f0805d11f99476_icgraph.png" border="0" usemap="#agroup__fdcan__file_gaadf44bf8c869482440f0805d11f99476_icgraph" alt=""/></div>
<map name="agroup__fdcan__file_gaadf44bf8c869482440f0805d11f99476_icgraph" id="agroup__fdcan__file_gaadf44bf8c869482440f0805d11f99476_icgraph">
<area shape="rect" title="Returns actual size of FIFO entry in FIFO for given CAN port and FIFO." alt="" coords="377,5,585,32"/>
<area shape="rect" href="fdcan__common_8c.html#a2b46020363086daba8210d09578a2a44" title="Returns a pointer to an RX FIFO element in message RAM." alt="" coords="167,5,329,32"/>
<area shape="rect" href="group__fdcan__file.html#ga6be35ed6bbbcb40afeda8ceb178a6583" title="Receive Message from FDCAN FIFO." alt="" coords="5,5,119,32"/>
</map>
</div>

</div>
</div>
<a id="gaad5478106451d7495f3f8fa90fc6b238" name="gaad5478106451d7495f3f8fa90fc6b238"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaad5478106451d7495f3f8fa90fc6b238">&#9670;&nbsp;</a></span>fdcan_get_init_state()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int fdcan_get_init_state </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>canport</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return current FDCAN block operation state. </p>
<p >This function effectively returns value of FDCAN_CCCR's INIT bit. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">canport</td><td>FDCAN block base address. See <a class="el" href="group__fdcan__block.html">FDCAN block base addresses</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 if FDCAN block is in INIT mode, 0 if it is already started. </dd></dl>

<p class="definition">Definition at line <a class="el" href="fdcan__common_8c_source.html#l00396">396</a> of file <a class="el" href="fdcan__common_8c_source.html">fdcan_common.c</a>.</p>

<p class="reference">References <a class="el" href="fdcan_8h_source.html#l00051">FDCAN_CCCR</a>, and <a class="el" href="fdcan_8h_source.html#l00151">FDCAN_CCCR_INIT</a>.</p>

</div>
</div>
<a id="gaf61aace89b3ea31afd3614922ff591ca" name="gaf61aace89b3ea31afd3614922ff591ca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf61aace89b3ea31afd3614922ff591ca">&#9670;&nbsp;</a></span>fdcan_get_txbuf_element_size()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned fdcan_get_txbuf_element_size </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>canport</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns actual size of transmit entry in transmit queue/FIFO for given CAN port. </p>
<p >Obtains value of entry length in transmit queue/FIFO. This value covers both fixed-sized frame header block and payload buffer. User can configure payload buffer size.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">canport</td><td>FDCAN block base address. See <a class="el" href="group__fdcan__block.html">FDCAN block base addresses</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Length of FIFO entry length covering frame header and frame payload. </dd></dl>

<p class="definition">Definition at line <a class="el" href="fdcan_8c_source.html#l00094">94</a> of file <a class="el" href="fdcan_8c_source.html">fdcan.c</a>.</p>

<p class="reference">References <a class="el" href="fdcan__common_8c_source.html#l00221">fdcan_dlc_to_length()</a>, <a class="el" href="h7_2fdcan_8h_source.html#l00070">FDCAN_TXESC</a>, <a class="el" href="h7_2fdcan_8h_source.html#l00206">FDCAN_TXESC_TBDS_MASK</a>, and <a class="el" href="h7_2fdcan_8h_source.html#l00207">FDCAN_TXESC_TBDS_SHIFT</a>.</p>

<p class="reference">Referenced by <a class="el" href="fdcan__common_8c_source.html#l00178">fdcan_get_txbuf_addr()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__fdcan__file_gaf61aace89b3ea31afd3614922ff591ca_cgraph.png" border="0" usemap="#agroup__fdcan__file_gaf61aace89b3ea31afd3614922ff591ca_cgraph" alt=""/></div>
<map name="agroup__fdcan__file_gaf61aace89b3ea31afd3614922ff591ca_cgraph" id="agroup__fdcan__file_gaf61aace89b3ea31afd3614922ff591ca_cgraph">
<area shape="rect" title="Returns actual size of transmit entry in transmit queue/FIFO for given CAN port." alt="" coords="5,5,227,32"/>
<area shape="rect" href="fdcan__common_8c.html#a17446d188c22a8af68cc52f73471bb0a" title="Converts DLC value into frame payload length." alt="" coords="275,5,427,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__fdcan__file_gaf61aace89b3ea31afd3614922ff591ca_icgraph.png" border="0" usemap="#agroup__fdcan__file_gaf61aace89b3ea31afd3614922ff591ca_icgraph" alt=""/></div>
<map name="agroup__fdcan__file_gaf61aace89b3ea31afd3614922ff591ca_icgraph" id="agroup__fdcan__file_gaf61aace89b3ea31afd3614922ff591ca_icgraph">
<area shape="rect" title="Returns actual size of transmit entry in transmit queue/FIFO for given CAN port." alt="" coords="384,5,605,32"/>
<area shape="rect" href="fdcan__common_8c.html#a05a659efa6aa776cb798376333674338" title="Returns a pointer to an TX FIFO element in message RAM." alt="" coords="173,5,336,32"/>
<area shape="rect" href="group__fdcan__file.html#gae1d9e017700d67ce1438f5a1b48be86c" title="Transmit Message using FDCAN." alt="" coords="5,5,125,32"/>
</map>
</div>

</div>
</div>
<a id="ga06b7c69884ed9878123ec3892984452f" name="ga06b7c69884ed9878123ec3892984452f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga06b7c69884ed9878123ec3892984452f">&#9670;&nbsp;</a></span>fdcan_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int fdcan_init </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>canport</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Put FDCAN block into INIT mode for setup. </p>
<p >Initialize the selected CAN peripheral block. This function will switch CAN block into initialization mode. CAN block is then left in initialization mode in order to perform setup, which can't be adjusted once FDCAN block is started. It is mandatory to call at least <a class="el" href="group__fdcan__file.html#gafdbf35157b3e249f948446d4a7159d36">fdcan_set_can</a> function to configure basic timing values for CAN 2.0 operation. Functions which only have effect, if FDCAN block is in INIT mode are:</p><ul>
<li><a class="el" href="group__fdcan__file.html#gafdbf35157b3e249f948446d4a7159d36">fdcan_set_can</a></li>
<li><a class="el" href="group__fdcan__file.html#ga75fe53bbb8689c9eac3341b14fe7fd2c">fdcan_set_fdcan</a></li>
<li><a class="el" href="group__fdcan__file.html#gaafd287821ee13b95b633e031247957b2">fdcan_init_filter</a></li>
<li><a class="el" href="group__fdcan__file.html#ga5143b049b7967f4ef6093344b9e0bc7a">fdcan_set_test</a></li>
</ul>
<p >You can check if FDCAN block is in INIT mode or it is started using <a class="el" href="group__fdcan__file.html#gaad5478106451d7495f3f8fa90fc6b238">fdcan_get_init_state</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">canport</td><td>CAN register base address. See <a class="el" href="group__fdcan__block.html">FDCAN block base addresses</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">timeout</td><td>Amount of empty busy loops, which routine should wait for FDCAN confirming that it entered INIT mode. If set to 0, function will return immediately. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Operation error status. See <a class="el" href="group__fdcan__error.html">FDCAN error return values</a>. </dd></dl>

<p class="definition">Definition at line <a class="el" href="fdcan__common_8c_source.html#l00260">260</a> of file <a class="el" href="fdcan__common_8c_source.html">fdcan_common.c</a>.</p>

<p class="reference">References <a class="el" href="fdcan_8h_source.html#l00051">FDCAN_CCCR</a>, <a class="el" href="fdcan_8h_source.html#l00152">FDCAN_CCCR_CCE</a>, <a class="el" href="fdcan__common_8c_source.html#l00041">fdcan_cccr_init_cfg()</a>, <a class="el" href="fdcan_8h_source.html#l00733">FDCAN_E_OK</a>, and <a class="el" href="fdcan_8h_source.html#l00739">FDCAN_E_TIMEOUT</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__fdcan__file_ga06b7c69884ed9878123ec3892984452f_cgraph.png" border="0" usemap="#agroup__fdcan__file_ga06b7c69884ed9878123ec3892984452f_cgraph" alt=""/></div>
<map name="agroup__fdcan__file_ga06b7c69884ed9878123ec3892984452f_cgraph" id="agroup__fdcan__file_ga06b7c69884ed9878123ec3892984452f_cgraph">
<area shape="rect" title="Put FDCAN block into INIT mode for setup." alt="" coords="5,5,92,32"/>
<area shape="rect" href="fdcan__common_8c.html#a212ca4857dbdd95a74f78c47b98c8380" title="Routine implementing FDCAN_CCCR&#39;s INIT bit manipulation." alt="" coords="140,5,287,32"/>
</map>
</div>

</div>
</div>
<a id="gaa1a343c660e01e6582cd585db31bf04d" name="gaa1a343c660e01e6582cd585db31bf04d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa1a343c660e01e6582cd585db31bf04d">&#9670;&nbsp;</a></span>fdcan_init_ext_filter_ram()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fdcan_init_ext_filter_ram </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>canport</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>flesa</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>lse</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize allocation of extended filter block in CAN message RAM. </p>
<p >Allows specifying size of extended filtering block (in term of available filtering rules and filter base address within CAN message RAM. Note, that there are no limitations nor checking on address provided. It is possible to share whole filtering block or portion of it between multiple CAN interfaces. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">canport</td><td>FDCAN block base address. See <a class="el" href="group__fdcan__block.html">FDCAN block base addresses</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">flesa</td><td>extended filtering block start address offset in message RAM </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">lse</td><td>amount of extended filters </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="fdcan_8c_source.html#l00127">127</a> of file <a class="el" href="fdcan_8c_source.html">fdcan.c</a>.</p>

<p class="reference">References <a class="el" href="h7_2fdcan_8h_source.html#l00048">FDCAN_XIDFC</a>, <a class="el" href="h7_2fdcan_8h_source.html#l00136">FDCAN_XIDFC_FLESA_SHIFT</a>, and <a class="el" href="h7_2fdcan_8h_source.html#l00132">FDCAN_XIDFC_LSE_SHIFT</a>.</p>

<p class="reference">Referenced by <a class="el" href="fdcan_8c_source.html#l00300">fdcan_init_filter()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__fdcan__file_gaa1a343c660e01e6582cd585db31bf04d_icgraph.png" border="0" usemap="#agroup__fdcan__file_gaa1a343c660e01e6582cd585db31bf04d_icgraph" alt=""/></div>
<map name="agroup__fdcan__file_gaa1a343c660e01e6582cd585db31bf04d_icgraph" id="agroup__fdcan__file_gaa1a343c660e01e6582cd585db31bf04d_icgraph">
<area shape="rect" title="Initialize allocation of extended filter block in CAN message RAM." alt="" coords="176,5,360,32"/>
<area shape="rect" href="group__fdcan__file.html#gaafd287821ee13b95b633e031247957b2" title="Configure amount of filters and initialize filtering block." alt="" coords="5,5,128,32"/>
</map>
</div>

</div>
</div>
<a id="ga0983f9183802804a157b56f9bab6e19e" name="ga0983f9183802804a157b56f9bab6e19e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0983f9183802804a157b56f9bab6e19e">&#9670;&nbsp;</a></span>fdcan_init_fifo_ram()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fdcan_init_fifo_ram </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>canport</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>fifo_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>fxsa</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>fxs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize allocation of FIFO block in CAN message RAM. </p>
<p >Allows specifying size of FIFO block (in term of available messages in FIFO and FIFO base address within CAN message RAM. Note, that there are no limitations nor checking on address provided. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">canport</td><td>FDCAN block base address. See <a class="el" href="group__fdcan__block.html">FDCAN block base addresses</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fifo_id</td><td>ID of fifo being configured </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fxsa</td><td>FIFO block start address offset in message RAM </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fxs</td><td>number of elements to assign </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="fdcan_8c_source.html#l00143">143</a> of file <a class="el" href="fdcan_8c_source.html">fdcan.c</a>.</p>

<p class="reference">References <a class="el" href="h7_2fdcan_8h_source.html#l00058">FDCAN_RXFIC</a>, <a class="el" href="h7_2fdcan_8h_source.html#l00158">FDCAN_RXFIC_FIS_MASK</a>, <a class="el" href="h7_2fdcan_8h_source.html#l00159">FDCAN_RXFIC_FIS_SHIFT</a>, <a class="el" href="h7_2fdcan_8h_source.html#l00162">FDCAN_RXFIC_FISA_MASK</a>, and <a class="el" href="h7_2fdcan_8h_source.html#l00163">FDCAN_RXFIC_FISA_SHIFT</a>.</p>

<p class="reference">Referenced by <a class="el" href="fdcan_8c_source.html#l00359">fdcan_start()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__fdcan__file_ga0983f9183802804a157b56f9bab6e19e_icgraph.png" border="0" usemap="#agroup__fdcan__file_ga0983f9183802804a157b56f9bab6e19e_icgraph" alt=""/></div>
<map name="agroup__fdcan__file_ga0983f9183802804a157b56f9bab6e19e_icgraph" id="agroup__fdcan__file_ga0983f9183802804a157b56f9bab6e19e_icgraph">
<area shape="rect" title="Initialize allocation of FIFO block in CAN message RAM." alt="" coords="148,5,295,32"/>
<area shape="rect" href="group__fdcan__file.html#ga24ca46499dbb8dc4b116b390bfe75fd1" title="Enable FDCAN operation after FDCAN block has been set up." alt="" coords="5,5,100,32"/>
</map>
</div>

</div>
</div>
<a id="gaafd287821ee13b95b633e031247957b2" name="gaafd287821ee13b95b633e031247957b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaafd287821ee13b95b633e031247957b2">&#9670;&nbsp;</a></span>fdcan_init_filter()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fdcan_init_filter </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>canport</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>std_filt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>ext_filt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configure amount of filters and initialize filtering block. </p>
<p >This function allows to configure global amount of filters present. FDCAN block will only ever check as many filters as this function configures. Function will also clear all filter blocks to zero values. This function can be only called after <a class="el" href="group__fdcan__file.html#ga06b7c69884ed9878123ec3892984452f">fdcan_init</a> has already been called and <a class="el" href="group__fdcan__file.html#ga24ca46499dbb8dc4b116b390bfe75fd1">fdcan_start</a> has not been called yet as registers holding filter count are write-protected unless FDCAN block is in INIT mode. It is possible to reconfigure filters (<a class="el" href="group__fdcan__file.html#ga4e641cc685f276d9a20cd26ff121d906">fdcan_set_std_filter</a> and <a class="el" href="group__fdcan__file.html#gab1a2c58b939230b7f866a82f7306ae5b">fdcan_set_ext_filter</a>) after FDCAN block has already been started.</p>
<p >This function is provided for source level compatibility with code written for STM32G4. As an alternative, you can use <a class="el" href="group__fdcan__defines.html#ga77b9ccd57eb2d38cc7ec23706c093d0c">fdcan_init_std_filter_ram()</a> and <a class="el" href="group__fdcan__defines.html#gaa1a343c660e01e6582cd585db31bf04d">fdcan_init_ext_filter_ram()</a> to have more control over filtering configuration. Note that if you do so, your code won't be compatible with STM32G4 controllers.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">canport</td><td>FDCAN block base address. See <a class="el" href="group__fdcan__block.html">FDCAN block base addresses</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">std_filt</td><td>requested amount of standard ID filter rules (0-28) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ext_filt</td><td>requested amount of extended ID filter rules (0-8) </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="fdcan_8c_source.html#l00300">300</a> of file <a class="el" href="fdcan_8c_source.html">fdcan.c</a>.</p>

<p class="reference">References <a class="el" href="stm32_2h7_2memorymap_8h_source.html#l00125">CAN_MSG_BASE</a>, <a class="el" href="h7_2fdcan_8h_source.html#l00043">CAN_MSG_SIZE</a>, <a class="el" href="fdcan_8h_source.html#l00587">fdcan_extended_filter::conf_id1</a>, <a class="el" href="fdcan_8h_source.html#l00042">FDCAN_BLOCK_ID</a>, <a class="el" href="fdcan__common_8c_source.html#l00136">fdcan_get_flesa_addr()</a>, <a class="el" href="fdcan__common_8c_source.html#l00124">fdcan_get_flssa_addr()</a>, <a class="el" href="fdcan_8c_source.html#l00127">fdcan_init_ext_filter_ram()</a>, <a class="el" href="fdcan_8c_source.html#l00111">fdcan_init_std_filter_ram()</a>, <a class="el" href="fdcan_8h_source.html#l00514">fdcan_standard_filter::type_id1_conf_id2</a>, and <a class="el" href="fdcan_8h_source.html#l00589">fdcan_extended_filter::type_id2</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__fdcan__file_gaafd287821ee13b95b633e031247957b2_cgraph.png" border="0" usemap="#agroup__fdcan__file_gaafd287821ee13b95b633e031247957b2_cgraph" alt=""/></div>
<map name="agroup__fdcan__file_gaafd287821ee13b95b633e031247957b2_cgraph" id="agroup__fdcan__file_gaafd287821ee13b95b633e031247957b2_cgraph">
<area shape="rect" title="Configure amount of filters and initialize filtering block." alt="" coords="5,81,128,108"/>
<area shape="rect" href="fdcan__common_8c.html#aeb4079993bdf00bf8a0cdc111532e743" title="Returns extended filter start address in message RAM." alt="" coords="188,5,348,32"/>
<area shape="rect" href="fdcan__common_8c.html#a2381d5d2666bf4f84e7e08e19b51b4ca" title="Returns standard filter start address in message RAM." alt="" coords="189,56,347,83"/>
<area shape="rect" href="group__fdcan__file.html#gaa1a343c660e01e6582cd585db31bf04d" title="Initialize allocation of extended filter block in CAN message RAM." alt="" coords="176,107,360,133"/>
<area shape="rect" href="group__fdcan__file.html#ga77b9ccd57eb2d38cc7ec23706c093d0c" title="Initialize allocation of standard filter block in CAN message RAM." alt="" coords="177,157,359,184"/>
</map>
</div>

</div>
</div>
<a id="ga77b9ccd57eb2d38cc7ec23706c093d0c" name="ga77b9ccd57eb2d38cc7ec23706c093d0c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga77b9ccd57eb2d38cc7ec23706c093d0c">&#9670;&nbsp;</a></span>fdcan_init_std_filter_ram()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fdcan_init_std_filter_ram </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>canport</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>flssa</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>lss</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize allocation of standard filter block in CAN message RAM. </p>
<p >Allows specifying size of standard filtering block (in term of available filtering rules and filter base address within CAN message RAM. Note, that there are no limitations nor checking on address provided. It is possible to share whole filtering block or portion of it between multiple CAN interfaces. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">canport</td><td>FDCAN block base address. See <a class="el" href="group__fdcan__block.html">FDCAN block base addresses</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">flssa</td><td>standard filtering block start address offset in message RAM </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">lss</td><td>amount of standard filters </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="fdcan_8c_source.html#l00111">111</a> of file <a class="el" href="fdcan_8c_source.html">fdcan.c</a>.</p>

<p class="reference">References <a class="el" href="h7_2fdcan_8h_source.html#l00047">FDCAN_SIDFC</a>, <a class="el" href="h7_2fdcan_8h_source.html#l00128">FDCAN_SIDFC_FLSSA_SHIFT</a>, and <a class="el" href="h7_2fdcan_8h_source.html#l00124">FDCAN_SIDFC_LSS_SHIFT</a>.</p>

<p class="reference">Referenced by <a class="el" href="fdcan_8c_source.html#l00300">fdcan_init_filter()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__fdcan__file_ga77b9ccd57eb2d38cc7ec23706c093d0c_icgraph.png" border="0" usemap="#agroup__fdcan__file_ga77b9ccd57eb2d38cc7ec23706c093d0c_icgraph" alt=""/></div>
<map name="agroup__fdcan__file_ga77b9ccd57eb2d38cc7ec23706c093d0c_icgraph" id="agroup__fdcan__file_ga77b9ccd57eb2d38cc7ec23706c093d0c_icgraph">
<area shape="rect" title="Initialize allocation of standard filter block in CAN message RAM." alt="" coords="176,5,359,32"/>
<area shape="rect" href="group__fdcan__file.html#gaafd287821ee13b95b633e031247957b2" title="Configure amount of filters and initialize filtering block." alt="" coords="5,5,128,32"/>
</map>
</div>

</div>
</div>
<a id="ga85878e033913a5901cf7b87adb142b05" name="ga85878e033913a5901cf7b87adb142b05"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga85878e033913a5901cf7b87adb142b05">&#9670;&nbsp;</a></span>fdcan_init_tx_buffer_ram()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fdcan_init_tx_buffer_ram </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>canport</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>tbsa</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>tbs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize allocation of transmit queue block in CAN message RAM. </p>
<p >Allows specifying size of transmit queue block (in term of allocated buffers and block base address within CAN message RAM. Note, that there are no limitations nor checking on address provided. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">canport</td><td>FDCAN block base address. See <a class="el" href="group__fdcan__block.html">FDCAN block base addresses</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">tbsa</td><td>block start address offset in message RAM </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">tbs</td><td>number of elements to assign </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="fdcan_8c_source.html#l00183">183</a> of file <a class="el" href="fdcan_8c_source.html">fdcan.c</a>.</p>

<p class="reference">References <a class="el" href="fdcan_8h_source.html#l00087">FDCAN_TXBC</a>, <a class="el" href="h7_2fdcan_8h_source.html#l00143">FDCAN_TXBC_TBSA_MASK</a>, <a class="el" href="h7_2fdcan_8h_source.html#l00144">FDCAN_TXBC_TBSA_SHIFT</a>, <a class="el" href="h7_2fdcan_8h_source.html#l00139">FDCAN_TXBC_TFQS_MASK</a>, and <a class="el" href="h7_2fdcan_8h_source.html#l00140">FDCAN_TXBC_TFQS_SHIFT</a>.</p>

<p class="reference">Referenced by <a class="el" href="fdcan_8c_source.html#l00359">fdcan_start()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__fdcan__file_ga85878e033913a5901cf7b87adb142b05_icgraph.png" border="0" usemap="#agroup__fdcan__file_ga85878e033913a5901cf7b87adb142b05_icgraph" alt=""/></div>
<map name="agroup__fdcan__file_ga85878e033913a5901cf7b87adb142b05_icgraph" id="agroup__fdcan__file_ga85878e033913a5901cf7b87adb142b05_icgraph">
<area shape="rect" title="Initialize allocation of transmit queue block in CAN message RAM." alt="" coords="148,5,332,32"/>
<area shape="rect" href="group__fdcan__file.html#ga24ca46499dbb8dc4b116b390bfe75fd1" title="Enable FDCAN operation after FDCAN block has been set up." alt="" coords="5,5,100,32"/>
</map>
</div>

</div>
</div>
<a id="ga004764aec240d40e03773129c6d8b734" name="ga004764aec240d40e03773129c6d8b734"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga004764aec240d40e03773129c6d8b734">&#9670;&nbsp;</a></span>fdcan_init_tx_event_ram()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fdcan_init_tx_event_ram </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>canport</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>tesa</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>tes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize allocation of transmit event block in CAN message RAM. </p>
<p >Allows specifying size of transmit event block (in term of allocated events and block base address within CAN message RAM. Note, that there are no limitations nor checking on address provided. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">canport</td><td>FDCAN block base address. See <a class="el" href="group__fdcan__block.html">FDCAN block base addresses</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">tesa</td><td>block start address offset in message RAM </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">tes</td><td>number of elements to assign </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="fdcan_8c_source.html#l00163">163</a> of file <a class="el" href="fdcan_8c_source.html">fdcan.c</a>.</p>

<p class="reference">References <a class="el" href="h7_2fdcan_8h_source.html#l00078">FDCAN_TXEFC</a>, <a class="el" href="h7_2fdcan_8h_source.html#l00146">FDCAN_TXEFC_EFS_MASK</a>, <a class="el" href="h7_2fdcan_8h_source.html#l00147">FDCAN_TXEFC_EFS_SHIFT</a>, <a class="el" href="h7_2fdcan_8h_source.html#l00150">FDCAN_TXEFC_EFSA_MASK</a>, and <a class="el" href="h7_2fdcan_8h_source.html#l00151">FDCAN_TXEFC_EFSA_SHIFT</a>.</p>

<p class="reference">Referenced by <a class="el" href="fdcan_8c_source.html#l00359">fdcan_start()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__fdcan__file_ga004764aec240d40e03773129c6d8b734_icgraph.png" border="0" usemap="#agroup__fdcan__file_ga004764aec240d40e03773129c6d8b734_icgraph" alt=""/></div>
<map name="agroup__fdcan__file_ga004764aec240d40e03773129c6d8b734_icgraph" id="agroup__fdcan__file_ga004764aec240d40e03773129c6d8b734_icgraph">
<area shape="rect" title="Initialize allocation of transmit event block in CAN message RAM." alt="" coords="148,5,331,32"/>
<area shape="rect" href="group__fdcan__file.html#ga24ca46499dbb8dc4b116b390bfe75fd1" title="Enable FDCAN operation after FDCAN block has been set up." alt="" coords="5,5,100,32"/>
</map>
</div>

</div>
</div>
<a id="ga6be35ed6bbbcb40afeda8ceb178a6583" name="ga6be35ed6bbbcb40afeda8ceb178a6583"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6be35ed6bbbcb40afeda8ceb178a6583">&#9670;&nbsp;</a></span>fdcan_receive()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int fdcan_receive </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>canport</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>fifo_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>release</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool *&#160;</td>
          <td class="paramname"><em>ext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool *&#160;</td>
          <td class="paramname"><em>rtr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>fmi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t *&#160;</td>
          <td class="paramname"><em>timestamp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Receive Message from FDCAN FIFO. </p>
<p >Reads one message from receive FIFO. Returns message ID, type of ID, message length and message payload. It is mandatory to provide valid pointers to suitably sized buffers for these outputs. Additionally, it is optinally possible to provide non-zero pointer to obtain filter identification, request of transmission flag and message timestamp. If pointers provided for optional outputs are NULL, then no information is returned for given pointer.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">canport</td><td>FDCAN block base address. See <a class="el" href="group__fdcan__block.html">FDCAN block base addresses</a> </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fifo_id</td><td>FIFO id. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">release</td><td>Release the FIFO automatically after copying data out </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">id</td><td>Returned message ID. Mandatory. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">ext</td><td>Returned type of the message ID (true if extended). Mandatory. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">rtr</td><td>Returnes flag if request of transmission was requested. Optional. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">fmi</td><td>Returned ID of the filter which matched this frame. Optional. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">length</td><td>Length of message payload in bytes. Mandatory. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">data</td><td>Buffer for storage of message payload data. Mandatory. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">timestamp</td><td>Returned timestamp of received frame. Optional. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Operation error status. See <a class="el" href="group__fdcan__error.html">FDCAN error return values</a>. </dd></dl>

<p class="definition">Definition at line <a class="el" href="fdcan__common_8c_source.html#l00562">562</a> of file <a class="el" href="fdcan__common_8c_source.html">fdcan_common.c</a>.</p>

<p class="reference">References <a class="el" href="fdcan_8h_source.html#l00667">fdcan_rx_fifo_element::data</a>, <a class="el" href="fdcan__common_8c_source.html#l00221">fdcan_dlc_to_length()</a>, <a class="el" href="fdcan_8h_source.html#l00749">FDCAN_E_NOTAVAIL</a>, <a class="el" href="fdcan_8h_source.html#l00733">FDCAN_E_OK</a>, <a class="el" href="fdcan_8h_source.html#l00715">FDCAN_FIFO_DLC_MASK</a>, <a class="el" href="fdcan_8h_source.html#l00714">FDCAN_FIFO_DLC_SHIFT</a>, <a class="el" href="fdcan_8h_source.html#l00709">FDCAN_FIFO_EID_MASK</a>, <a class="el" href="fdcan_8h_source.html#l00708">FDCAN_FIFO_EID_SHIFT</a>, <a class="el" href="fdcan_8h_source.html#l00718">FDCAN_FIFO_MM_MASK</a>, <a class="el" href="fdcan_8h_source.html#l00717">FDCAN_FIFO_MM_SHIFT</a>, <a class="el" href="fdcan_8h_source.html#l00702">FDCAN_FIFO_RTR</a>, <a class="el" href="fdcan_8h_source.html#l00725">FDCAN_FIFO_RXTS_MASK</a>, <a class="el" href="fdcan_8h_source.html#l00724">FDCAN_FIFO_RXTS_SHIFT</a>, <a class="el" href="fdcan_8h_source.html#l00712">FDCAN_FIFO_SID_MASK</a>, <a class="el" href="fdcan_8h_source.html#l00711">FDCAN_FIFO_SID_SHIFT</a>, <a class="el" href="fdcan_8h_source.html#l00701">FDCAN_FIFO_XTD</a>, <a class="el" href="fdcan__common_8c_source.html#l00109">fdcan_get_fill_rxfifo()</a>, <a class="el" href="fdcan__common_8c_source.html#l00150">fdcan_get_rxfifo_addr()</a>, <a class="el" href="fdcan_8h_source.html#l00081">FDCAN_RXFIA</a>, <a class="el" href="fdcan_8h_source.html#l00389">FDCAN_RXFIFO_AI_SHIFT</a>, <a class="el" href="fdcan_8h_source.html#l00665">fdcan_rx_fifo_element::filt_fmt_dlc_ts</a>, and <a class="el" href="fdcan_8h_source.html#l00663">fdcan_rx_fifo_element::identifier_flags</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__fdcan__file_ga6be35ed6bbbcb40afeda8ceb178a6583_cgraph.png" border="0" usemap="#agroup__fdcan__file_ga6be35ed6bbbcb40afeda8ceb178a6583_cgraph" alt=""/></div>
<map name="agroup__fdcan__file_ga6be35ed6bbbcb40afeda8ceb178a6583_cgraph" id="agroup__fdcan__file_ga6be35ed6bbbcb40afeda8ceb178a6583_cgraph">
<area shape="rect" title="Receive Message from FDCAN FIFO." alt="" coords="5,26,119,53"/>
<area shape="rect" href="fdcan__common_8c.html#a17446d188c22a8af68cc52f73471bb0a" title="Converts DLC value into frame payload length." alt="" coords="633,26,785,53"/>
<area shape="rect" href="fdcan__common_8c.html#ab6a09c672de1fc9ff611685c004ca83c" title="Returns fill state and next available get index from receive FIFO." alt="" coords="173,26,323,53"/>
<area shape="rect" href="fdcan__common_8c.html#a2b46020363086daba8210d09578a2a44" title="Returns a pointer to an RX FIFO element in message RAM." alt="" coords="167,77,329,104"/>
<area shape="rect" href="group__fdcan__file.html#gaadf44bf8c869482440f0805d11f99476" title="Returns actual size of FIFO entry in FIFO for given CAN port and FIFO." alt="" coords="377,52,585,78"/>
</map>
</div>

</div>
</div>
<a id="ga3ed60528070b6a8a3aa79a570b651e14" name="ga3ed60528070b6a8a3aa79a570b651e14"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3ed60528070b6a8a3aa79a570b651e14">&#9670;&nbsp;</a></span>fdcan_release_fifo()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fdcan_release_fifo </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>canport</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>fifo_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Release receive oldest FIFO entry. </p>
<p >This function will mask oldest entry in FIFO as released making space for another received frame. This function can be used if fdcan_receive was called using release = false. If used in other case, then messages can get lost.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">canport</td><td>FDCAN block base address. See <a class="el" href="group__fdcan__block.html">FDCAN block base addresses</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fifo_id</td><td>ID of FIFO where release should be performed (0 or 1) </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="fdcan__common_8c_source.html#l00628">628</a> of file <a class="el" href="fdcan__common_8c_source.html">fdcan_common.c</a>.</p>

<p class="reference">References <a class="el" href="fdcan_8h_source.html#l00081">FDCAN_RXFIA</a>, <a class="el" href="fdcan_8h_source.html#l00389">FDCAN_RXFIFO_AI_SHIFT</a>, <a class="el" href="fdcan_8h_source.html#l00362">FDCAN_RXFIFO_FL_SHIFT</a>, <a class="el" href="fdcan_8h_source.html#l00365">FDCAN_RXFIFO_GI_SHIFT</a>, and <a class="el" href="fdcan_8h_source.html#l00070">FDCAN_RXFIS</a>.</p>

</div>
</div>
<a id="gafdbf35157b3e249f948446d4a7159d36" name="gafdbf35157b3e249f948446d4a7159d36"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gafdbf35157b3e249f948446d4a7159d36">&#9670;&nbsp;</a></span>fdcan_set_can()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fdcan_set_can </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>canport</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>auto_retry_disable</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>rx_fifo_locked</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>tx_queue_mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>silent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>n_sjw</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>n_ts1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>n_ts2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>n_br_presc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set essential FDCAN block parameters for plain CAN operation. </p>
<p >Allows configuration of prescalers and essential transmit and FIFO behavior used during transmission in plain CAN 2.0 mode. In this mode FDCAN frame format is not available nor is possible to use fast bitrates. This function does neither enable FD-CAN mode after reset nor disable it after re-entering INIT mode of previously configured block. Timing values set here are valid for both arbitration phase of all frames and for data phase of both CAN and FDCAN frames, which don't use bitrate switching. This function can only be called after FDCAN block has been switched into INIT mode. It is possible to receive FDCAN frames even if FDCAN block is configured only using this function as long as bitrate switching is not used.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">canport</td><td>FDCAN block base address. See <a class="el" href="group__fdcan__block.html">FDCAN block base addresses</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">auto_retry_disable</td><td>Disable automatic frame retransmission on error </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">rx_fifo_locked</td><td>Enable FIFO locked mode. Upon FIFO overflow all received messages are discarded. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">tx_queue_mode</td><td>Enable transmission queue mode. Otherwise transmission works in FIFO mode. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">silent</td><td>Enable silent mode. Transmitter stays recessive all the time. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">n_sjw</td><td>Resynchronization time quanta jump width </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">n_ts1</td><td>Time segment 1 time quanta </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">n_ts2</td><td>Time segment 2 time quanta </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">n_br_presc</td><td>Arbitration phase / CAN mode bitrate prescaler </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="fdcan__common_8c_source.html#l00296">296</a> of file <a class="el" href="fdcan__common_8c_source.html">fdcan_common.c</a>.</p>

<p class="reference">References <a class="el" href="fdcan_8h_source.html#l00051">FDCAN_CCCR</a>, <a class="el" href="fdcan_8h_source.html#l00157">FDCAN_CCCR_DAR</a>, <a class="el" href="fdcan_8h_source.html#l00156">FDCAN_CCCR_MON</a>, <a class="el" href="fdcan_8h_source.html#l00052">FDCAN_NBTP</a>, <a class="el" href="fdcan_8h_source.html#l00187">FDCAN_NBTP_NBRP_SHIFT</a>, <a class="el" href="fdcan_8h_source.html#l00191">FDCAN_NBTP_NSJW_SHIFT</a>, <a class="el" href="fdcan_8h_source.html#l00183">FDCAN_NBTP_NTSEG1_SHIFT</a>, <a class="el" href="fdcan_8h_source.html#l00179">FDCAN_NBTP_NTSEG2_SHIFT</a>, <a class="el" href="fdcan_8c_source.html#l00460">fdcan_set_fifo_locked_mode()</a>, <a class="el" href="fdcan_8h_source.html#l00087">FDCAN_TXBC</a>, and <a class="el" href="fdcan_8h_source.html#l00414">FDCAN_TXBC_TFQM</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__fdcan__file_gafdbf35157b3e249f948446d4a7159d36_cgraph.png" border="0" usemap="#agroup__fdcan__file_gafdbf35157b3e249f948446d4a7159d36_cgraph" alt=""/></div>
<map name="agroup__fdcan__file_gafdbf35157b3e249f948446d4a7159d36_cgraph" id="agroup__fdcan__file_gafdbf35157b3e249f948446d4a7159d36_cgraph">
<area shape="rect" title="Set essential FDCAN block parameters for plain CAN operation." alt="" coords="5,5,120,32"/>
<area shape="rect" href="group__fdcan__file.html#ga20a3a6969918dce6b337613fc3f76b79" title="Configure FDCAN FIFO lock mode." alt="" coords="168,5,375,32"/>
</map>
</div>

</div>
</div>
<a id="gab1a2c58b939230b7f866a82f7306ae5b" name="gab1a2c58b939230b7f866a82f7306ae5b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab1a2c58b939230b7f866a82f7306ae5b">&#9670;&nbsp;</a></span>fdcan_set_ext_filter()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fdcan_set_ext_filter </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>canport</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>nr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>id_list_mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>id1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>id2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>action</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configure filter rule for extended ID frames. </p>
<p >Sets up filter rule for frames having extended ID. Each FDCAN block can have its own set of filtering rules. It is only possible to configure as many filters as was configured previously using <a class="el" href="group__fdcan__file.html#gaafd287821ee13b95b633e031247957b2">fdcan_init_filter</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">canport</td><td>FDCAN block base address. See <a class="el" href="group__fdcan__block.html">FDCAN block base addresses</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">nr</td><td>number of filter to be configured </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">id_list_mode</td><td>mode in which id1 and id2 are used to match the rule. See <a class="el" href="group__fdcan__eft.html">Extended ID filter match type</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">id1</td><td>extended ID for matching. Used as exact value, lower bound or bit pattern depending on matching mode selected </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">id2</td><td>extended ID or bitmask. Used as exact value, upper bound or bit mask depending on matching mode selected </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">action</td><td>Action performed if filtering rule matches frame ID. See <a class="el" href="group__fdcan__efec.html">Extended ID filter action</a>. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="fdcan__common_8c_source.html#l00458">458</a> of file <a class="el" href="fdcan__common_8c_source.html">fdcan_common.c</a>.</p>

<p class="reference">References <a class="el" href="fdcan_8h_source.html#l00587">fdcan_extended_filter::conf_id1</a>, <a class="el" href="fdcan_8h_source.html#l00592">FDCAN_EFEC_SHIFT</a>, <a class="el" href="fdcan_8h_source.html#l00627">FDCAN_EFID1_MASK</a>, <a class="el" href="fdcan_8h_source.html#l00626">FDCAN_EFID1_SHIFT</a>, <a class="el" href="fdcan_8h_source.html#l00654">FDCAN_EFID2_MASK</a>, <a class="el" href="fdcan_8h_source.html#l00653">FDCAN_EFID2_SHIFT</a>, <a class="el" href="fdcan_8h_source.html#l00629">FDCAN_EFT_SHIFT</a>, <a class="el" href="fdcan__common_8c_source.html#l00136">fdcan_get_flesa_addr()</a>, and <a class="el" href="fdcan_8h_source.html#l00589">fdcan_extended_filter::type_id2</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__fdcan__file_gab1a2c58b939230b7f866a82f7306ae5b_cgraph.png" border="0" usemap="#agroup__fdcan__file_gab1a2c58b939230b7f866a82f7306ae5b_cgraph" alt=""/></div>
<map name="agroup__fdcan__file_gab1a2c58b939230b7f866a82f7306ae5b_cgraph" id="agroup__fdcan__file_gab1a2c58b939230b7f866a82f7306ae5b_cgraph">
<area shape="rect" title="Configure filter rule for extended ID frames." alt="" coords="5,5,156,32"/>
<area shape="rect" href="fdcan__common_8c.html#aeb4079993bdf00bf8a0cdc111532e743" title="Returns extended filter start address in message RAM." alt="" coords="204,5,364,32"/>
</map>
</div>

</div>
</div>
<a id="ga75fe53bbb8689c9eac3341b14fe7fd2c" name="ga75fe53bbb8689c9eac3341b14fe7fd2c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga75fe53bbb8689c9eac3341b14fe7fd2c">&#9670;&nbsp;</a></span>fdcan_set_fdcan()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fdcan_set_fdcan </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>canport</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>brs_enable</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>fd_op_enable</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>f_sjw</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>f_ts1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>f_ts2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>f_br_presc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set FDCAN block parameters for FDCAN transmission. </p>
<p >Enables and configures parameters related to FDCAN transmission. This function allows configuration of bitrate switching, FDCAN frame format and fast mode timing. This function can only be called if FDCAN block is in INIT mode. It is safe to call this function on previously configured block in order to enable/disable/change FDCAN mode parameters. Non-FDCAN parameters won't be affected.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">canport</td><td>FDCAN block base address. See <a class="el" href="group__fdcan__block.html">FDCAN block base addresses</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">brs_enable</td><td>Enable FDCAN bitrate switching for fast mode operation </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fd_op_enable</td><td>Enable transmission of FDCAN-formatted frames </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">f_sjw</td><td>Resynchronization time quanta jump width in fast mode </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">f_ts1</td><td>Time segment 1 time quanta in fast mode </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">f_ts2</td><td>Time segment 2 time quanta in fast mode </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">f_br_presc</td><td>Fast mode operation bitrate prescaler </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="fdcan__common_8c_source.html#l00343">343</a> of file <a class="el" href="fdcan__common_8c_source.html">fdcan_common.c</a>.</p>

<p class="reference">References <a class="el" href="fdcan_8h_source.html#l00051">FDCAN_CCCR</a>, <a class="el" href="fdcan_8h_source.html#l00160">FDCAN_CCCR_BRSE</a>, <a class="el" href="fdcan_8h_source.html#l00159">FDCAN_CCCR_FDOE</a>, <a class="el" href="fdcan_8h_source.html#l00048">FDCAN_DBTP</a>, <a class="el" href="fdcan_8h_source.html#l00128">FDCAN_DBTP_DBRP_SHIFT</a>, <a class="el" href="fdcan_8h_source.html#l00116">FDCAN_DBTP_DSJW_SHIFT</a>, <a class="el" href="fdcan_8h_source.html#l00124">FDCAN_DBTP_DTSEG1_SHIFT</a>, and <a class="el" href="fdcan_8h_source.html#l00120">FDCAN_DBTP_DTSEG2_SHIFT</a>.</p>

</div>
</div>
<a id="ga20a3a6969918dce6b337613fc3f76b79" name="ga20a3a6969918dce6b337613fc3f76b79"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga20a3a6969918dce6b337613fc3f76b79">&#9670;&nbsp;</a></span>fdcan_set_fifo_locked_mode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fdcan_set_fifo_locked_mode </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>canport</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>locked</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configure FDCAN FIFO lock mode. </p>
<p >This function allows to choose between locked and overewrite mode of FIFOs. In locked mode, whenever FIFO is full and new frame arrives, which would normally been stored into given FIFO, then frame is dropped. If overwrite mode is active, then most recent message in FIFO is rewritten by frame just received. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">canport</td><td>FDCAN block base address. See <a class="el" href="group__fdcan__block.html">FDCAN block base addresses</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">locked</td><td>true activates locked mode, false activates overwrite mode </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="fdcan_8c_source.html#l00460">460</a> of file <a class="el" href="fdcan_8c_source.html">fdcan.c</a>.</p>

<p class="reference">References <a class="el" href="h7_2fdcan_8h_source.html#l00061">FDCAN_RXF0C</a>, <a class="el" href="h7_2fdcan_8h_source.html#l00165">FDCAN_RXF0C_F0OM</a>, <a class="el" href="h7_2fdcan_8h_source.html#l00062">FDCAN_RXF1C</a>, and <a class="el" href="h7_2fdcan_8h_source.html#l00179">FDCAN_RXF1C_F1OM</a>.</p>

<p class="reference">Referenced by <a class="el" href="fdcan__common_8c_source.html#l00296">fdcan_set_can()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__fdcan__file_ga20a3a6969918dce6b337613fc3f76b79_icgraph.png" border="0" usemap="#agroup__fdcan__file_ga20a3a6969918dce6b337613fc3f76b79_icgraph" alt=""/></div>
<map name="agroup__fdcan__file_ga20a3a6969918dce6b337613fc3f76b79_icgraph" id="agroup__fdcan__file_ga20a3a6969918dce6b337613fc3f76b79_icgraph">
<area shape="rect" title="Configure FDCAN FIFO lock mode." alt="" coords="168,5,375,32"/>
<area shape="rect" href="group__fdcan__file.html#gafdbf35157b3e249f948446d4a7159d36" title="Set essential FDCAN block parameters for plain CAN operation." alt="" coords="5,5,120,32"/>
</map>
</div>

</div>
</div>
<a id="ga02e16aa4f82067b119e6c1262ffae476" name="ga02e16aa4f82067b119e6c1262ffae476"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga02e16aa4f82067b119e6c1262ffae476">&#9670;&nbsp;</a></span>fdcan_set_rx_element_size()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int fdcan_set_rx_element_size </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>canport</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>rxbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>rxfifo0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>rxfifo1</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize size of data fields in reception buffers. </p>
<p >Configures maximum size of message payload, which can be stored in different reception buffers. Each buffer can have maximum payload size configured independently. Buffers can only be configured to sizes which are valid sizes of FDCAN payload. Sizes smaller than 8 are automatically padded to 8. </p><dl class="section note"><dt>Note</dt><dd>If you change these values, then content of reception buffers is invalidated. You may also want to recalculate base addresses of objects in message RAM as their size might have changed. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">canport</td><td>FDCAN block base address. See <a class="el" href="group__fdcan__block.html">FDCAN block base addresses</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">rxbuf</td><td>maximum storable payload size of dedicated RX buffer </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">rxfifo0</td><td>maximum storable payload size of RX FIFO 0 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">rxfifo1</td><td>maximum storable payload size of RX FIFO 1 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>operation return status. See <a class="el" href="group__fdcan__error.html">FDCAN error return values</a>. </dd></dl>

<p class="definition">Definition at line <a class="el" href="fdcan_8c_source.html#l00209">209</a> of file <a class="el" href="fdcan_8c_source.html">fdcan.c</a>.</p>

<p class="reference">References <a class="el" href="fdcan_8h_source.html#l00742">FDCAN_E_INVALID</a>, <a class="el" href="fdcan_8h_source.html#l00733">FDCAN_E_OK</a>, <a class="el" href="fdcan__common_8c_source.html#l00197">fdcan_length_to_dlc()</a>, <a class="el" href="h7_2fdcan_8h_source.html#l00069">FDCAN_RXESC</a>, <a class="el" href="h7_2fdcan_8h_source.html#l00199">FDCAN_RXESC_F0DS_SHIFT</a>, <a class="el" href="h7_2fdcan_8h_source.html#l00203">FDCAN_RXESC_F1DS_SHIFT</a>, and <a class="el" href="h7_2fdcan_8h_source.html#l00195">FDCAN_RXESC_RBDS_SHIFT</a>.</p>

<p class="reference">Referenced by <a class="el" href="fdcan_8c_source.html#l00359">fdcan_start()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__fdcan__file_ga02e16aa4f82067b119e6c1262ffae476_cgraph.png" border="0" usemap="#agroup__fdcan__file_ga02e16aa4f82067b119e6c1262ffae476_cgraph" alt=""/></div>
<map name="agroup__fdcan__file_ga02e16aa4f82067b119e6c1262ffae476_cgraph" id="agroup__fdcan__file_ga02e16aa4f82067b119e6c1262ffae476_cgraph">
<area shape="rect" title="Initialize size of data fields in reception buffers." alt="" coords="5,5,204,32"/>
<area shape="rect" href="fdcan__common_8c.html#af34ae07006b3a1e1b418e09f2b5f4792" title="Converts frame length to DLC value." alt="" coords="252,5,404,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__fdcan__file_ga02e16aa4f82067b119e6c1262ffae476_icgraph.png" border="0" usemap="#agroup__fdcan__file_ga02e16aa4f82067b119e6c1262ffae476_icgraph" alt=""/></div>
<map name="agroup__fdcan__file_ga02e16aa4f82067b119e6c1262ffae476_icgraph" id="agroup__fdcan__file_ga02e16aa4f82067b119e6c1262ffae476_icgraph">
<area shape="rect" title="Initialize size of data fields in reception buffers." alt="" coords="148,5,347,32"/>
<area shape="rect" href="group__fdcan__file.html#ga24ca46499dbb8dc4b116b390bfe75fd1" title="Enable FDCAN operation after FDCAN block has been set up." alt="" coords="5,5,100,32"/>
</map>
</div>

</div>
</div>
<a id="ga4e641cc685f276d9a20cd26ff121d906" name="ga4e641cc685f276d9a20cd26ff121d906"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4e641cc685f276d9a20cd26ff121d906">&#9670;&nbsp;</a></span>fdcan_set_std_filter()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fdcan_set_std_filter </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>canport</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>nr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>id_list_mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>id1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>id2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>action</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configure filter rule for standard ID frames. </p>
<p >Sets up filter rule for frames having standard ID. Each FDCAN block can have its own set of filtering rules. It is only possible to configure as many filters as was configured previously using <a class="el" href="group__fdcan__file.html#gaafd287821ee13b95b633e031247957b2">fdcan_init_filter</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">canport</td><td>FDCAN block base address. See <a class="el" href="group__fdcan__block.html">FDCAN block base addresses</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">nr</td><td>number of filter to be configured </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">id_list_mode</td><td>Mode in which id1 and id2 are used to match the rule. See <a class="el" href="group__fdcan__sft.html">Standard ID filter match type</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">id1</td><td>standard ID for matching. Used as exact value, lower bound or bit pattern depending on matching mode selected </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">id2</td><td>standard ID or bitmask. Used as exact value, upper bound or bit mask depending on matching mode selected </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">action</td><td>Action performed if filtering rule matches frame ID. See <a class="el" href="group__fdcan__sfec.html">Standard ID filter action</a>. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="fdcan__common_8c_source.html#l00418">418</a> of file <a class="el" href="fdcan__common_8c_source.html">fdcan_common.c</a>.</p>

<p class="reference">References <a class="el" href="fdcan__common_8c_source.html#l00124">fdcan_get_flssa_addr()</a>, <a class="el" href="fdcan_8h_source.html#l00539">FDCAN_SFEC_SHIFT</a>, <a class="el" href="fdcan_8h_source.html#l00576">FDCAN_SFID1_MASK</a>, <a class="el" href="fdcan_8h_source.html#l00575">FDCAN_SFID1_SHIFT</a>, <a class="el" href="fdcan_8h_source.html#l00579">FDCAN_SFID2_MASK</a>, <a class="el" href="fdcan_8h_source.html#l00578">FDCAN_SFID2_SHIFT</a>, <a class="el" href="fdcan_8h_source.html#l00517">FDCAN_SFT_SHIFT</a>, and <a class="el" href="fdcan_8h_source.html#l00514">fdcan_standard_filter::type_id1_conf_id2</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__fdcan__file_ga4e641cc685f276d9a20cd26ff121d906_cgraph.png" border="0" usemap="#agroup__fdcan__file_ga4e641cc685f276d9a20cd26ff121d906_cgraph" alt=""/></div>
<map name="agroup__fdcan__file_ga4e641cc685f276d9a20cd26ff121d906_cgraph" id="agroup__fdcan__file_ga4e641cc685f276d9a20cd26ff121d906_cgraph">
<area shape="rect" title="Configure filter rule for standard ID frames." alt="" coords="5,5,155,32"/>
<area shape="rect" href="fdcan__common_8c.html#a2381d5d2666bf4f84e7e08e19b51b4ca" title="Returns standard filter start address in message RAM." alt="" coords="203,5,361,32"/>
</map>
</div>

</div>
</div>
<a id="ga5143b049b7967f4ef6093344b9e0bc7a" name="ga5143b049b7967f4ef6093344b9e0bc7a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5143b049b7967f4ef6093344b9e0bc7a">&#9670;&nbsp;</a></span>fdcan_set_test()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fdcan_set_test </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>canport</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>testing</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>loopback</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set FDCAN block testing features. </p>
<p >Configures self-test functions of FDCAN block. It is safe to call this function on fully configured interface. This function can only be called after FDCAN block is put into INIT mode.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">canport</td><td>FDCAN block base address. See <a class="el" href="group__fdcan__block.html">FDCAN block base addresses</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">testing</td><td>Enables testing mode of FDCAN block </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">loopback</td><td>Enables transmission loopback </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="fdcan__common_8c_source.html#l00374">374</a> of file <a class="el" href="fdcan__common_8c_source.html">fdcan_common.c</a>.</p>

<p class="reference">References <a class="el" href="fdcan_8h_source.html#l00051">FDCAN_CCCR</a>, <a class="el" href="fdcan_8h_source.html#l00158">FDCAN_CCCR_TEST</a>, <a class="el" href="fdcan_8h_source.html#l00049">FDCAN_TEST</a>, and <a class="el" href="fdcan_8h_source.html#l00133">FDCAN_TEST_LBCK</a>.</p>

</div>
</div>
<a id="ga9d9b1dd105ee715c09d001534577f188" name="ga9d9b1dd105ee715c09d001534577f188"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9d9b1dd105ee715c09d001534577f188">&#9670;&nbsp;</a></span>fdcan_set_tx_element_size()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int fdcan_set_tx_element_size </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>canport</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>txbuf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize size of data fields in transmit buffers. </p>
<p >Configures maximum size of message payload, which can be stored either in dedicated transmit buffer or into transmit queue/FIFO. One size is applied both to transmit buffer and transmit queue / FIFO. Buffers can only be configured to sizes which are valid sizes of FDCAN payload. Sizes smaller than 8 are automatically padded to 8 bytes. </p><dl class="section note"><dt>Note</dt><dd>If you change these values, then content of transmission buffers is invalidated. You may also want to recalculate base addresses of objects in message RAM as their size might have changed. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">canport</td><td>FDCAN block base address. See <a class="el" href="group__fdcan__block.html">FDCAN block base addresses</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">txbuf</td><td>maximum storable payload size of TX buffer / FIFO / queue </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>operation return status. See <a class="el" href="group__fdcan__error.html">FDCAN error return values</a>. </dd></dl>

<p class="definition">Definition at line <a class="el" href="fdcan_8c_source.html#l00261">261</a> of file <a class="el" href="fdcan_8c_source.html">fdcan.c</a>.</p>

<p class="reference">References <a class="el" href="fdcan_8h_source.html#l00742">FDCAN_E_INVALID</a>, <a class="el" href="fdcan_8h_source.html#l00733">FDCAN_E_OK</a>, <a class="el" href="fdcan__common_8c_source.html#l00197">fdcan_length_to_dlc()</a>, <a class="el" href="h7_2fdcan_8h_source.html#l00070">FDCAN_TXESC</a>, and <a class="el" href="h7_2fdcan_8h_source.html#l00207">FDCAN_TXESC_TBDS_SHIFT</a>.</p>

<p class="reference">Referenced by <a class="el" href="fdcan_8c_source.html#l00359">fdcan_start()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__fdcan__file_ga9d9b1dd105ee715c09d001534577f188_cgraph.png" border="0" usemap="#agroup__fdcan__file_ga9d9b1dd105ee715c09d001534577f188_cgraph" alt=""/></div>
<map name="agroup__fdcan__file_ga9d9b1dd105ee715c09d001534577f188_cgraph" id="agroup__fdcan__file_ga9d9b1dd105ee715c09d001534577f188_cgraph">
<area shape="rect" title="Initialize size of data fields in transmit buffers." alt="" coords="5,5,204,32"/>
<area shape="rect" href="fdcan__common_8c.html#af34ae07006b3a1e1b418e09f2b5f4792" title="Converts frame length to DLC value." alt="" coords="252,5,404,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__fdcan__file_ga9d9b1dd105ee715c09d001534577f188_icgraph.png" border="0" usemap="#agroup__fdcan__file_ga9d9b1dd105ee715c09d001534577f188_icgraph" alt=""/></div>
<map name="agroup__fdcan__file_ga9d9b1dd105ee715c09d001534577f188_icgraph" id="agroup__fdcan__file_ga9d9b1dd105ee715c09d001534577f188_icgraph">
<area shape="rect" title="Initialize size of data fields in transmit buffers." alt="" coords="148,5,347,32"/>
<area shape="rect" href="group__fdcan__file.html#ga24ca46499dbb8dc4b116b390bfe75fd1" title="Enable FDCAN operation after FDCAN block has been set up." alt="" coords="5,5,100,32"/>
</map>
</div>

</div>
</div>
<a id="ga24ca46499dbb8dc4b116b390bfe75fd1" name="ga24ca46499dbb8dc4b116b390bfe75fd1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga24ca46499dbb8dc4b116b390bfe75fd1">&#9670;&nbsp;</a></span>fdcan_start()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int fdcan_start </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>canport</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enable FDCAN operation after FDCAN block has been set up. </p>
<p >This function will disable FDCAN configuration effectively allowing FDCAN to sync up with the bus. After calling this function it is not possible to reconfigure amount of filter rules, yet it is possible to configure rules themselves. FDCAN block operation state can be checked using <a class="el" href="group__fdcan__file.html#gaad5478106451d7495f3f8fa90fc6b238">fdcan_get_init_state</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">canport</td><td>FDCAN block base address. See <a class="el" href="group__fdcan__block.html">FDCAN block base addresses</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">timeout</td><td>Amount of empty busy loops, which routine should wait for FDCAN confirming that it left INIT mode. If set to 0, function will return immediately. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Operation error status. See <a class="el" href="group__fdcan__error.html">FDCAN error return values</a>. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>If this function returns with timeout, it usually means that FDCAN_clk is not set up properly. </dd></dl>

<p class="definition">Definition at line <a class="el" href="fdcan_8c_source.html#l00359">359</a> of file <a class="el" href="fdcan_8c_source.html">fdcan.c</a>.</p>

<p class="reference">References <a class="el" href="h7_2fdcan_8h_source.html#l00043">CAN_MSG_SIZE</a>, <a class="el" href="fdcan_8h_source.html#l00042">FDCAN_BLOCK_ID</a>, <a class="el" href="fdcan__common_8c_source.html#l00041">fdcan_cccr_init_cfg()</a>, <a class="el" href="fdcan_8h_source.html#l00733">FDCAN_E_OK</a>, <a class="el" href="fdcan_8h_source.html#l00739">FDCAN_E_TIMEOUT</a>, <a class="el" href="fdcan_8c_source.html#l00143">fdcan_init_fifo_ram()</a>, <a class="el" href="fdcan_8c_source.html#l00183">fdcan_init_tx_buffer_ram()</a>, <a class="el" href="fdcan_8c_source.html#l00163">fdcan_init_tx_event_ram()</a>, <a class="el" href="h7_2fdcan_8h_source.html#l00232">FDCAN_LFESA_OFFSET</a>, <a class="el" href="fdcan_8c_source.html#l00053">FDCAN_LSE_COUNT</a>, <a class="el" href="h7_2fdcan_8h_source.html#l00069">FDCAN_RXESC</a>, <a class="el" href="h7_2fdcan_8h_source.html#l00235">FDCAN_RXFIFO_OFFSET</a>, <a class="el" href="fdcan_8c_source.html#l00209">fdcan_set_rx_element_size()</a>, <a class="el" href="fdcan_8c_source.html#l00261">fdcan_set_tx_element_size()</a>, <a class="el" href="h7_2fdcan_8h_source.html#l00238">FDCAN_TXBUF_OFFSET</a>, <a class="el" href="h7_2fdcan_8h_source.html#l00070">FDCAN_TXESC</a>, and <a class="el" href="h7_2fdcan_8h_source.html#l00241">FDCAN_TXEVT_OFFSET</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__fdcan__file_ga24ca46499dbb8dc4b116b390bfe75fd1_cgraph.png" border="0" usemap="#agroup__fdcan__file_ga24ca46499dbb8dc4b116b390bfe75fd1_cgraph" alt=""/></div>
<map name="agroup__fdcan__file_ga24ca46499dbb8dc4b116b390bfe75fd1_cgraph" id="agroup__fdcan__file_ga24ca46499dbb8dc4b116b390bfe75fd1_cgraph">
<area shape="rect" title="Enable FDCAN operation after FDCAN block has been set up." alt="" coords="5,132,100,159"/>
<area shape="rect" href="fdcan__common_8c.html#a212ca4857dbdd95a74f78c47b98c8380" title="Routine implementing FDCAN_CCCR&#39;s INIT bit manipulation." alt="" coords="174,5,321,32"/>
<area shape="rect" href="group__fdcan__file.html#ga0983f9183802804a157b56f9bab6e19e" title="Initialize allocation of FIFO block in CAN message RAM." alt="" coords="174,56,321,83"/>
<area shape="rect" href="group__fdcan__file.html#ga85878e033913a5901cf7b87adb142b05" title="Initialize allocation of transmit queue block in CAN message RAM." alt="" coords="155,107,339,133"/>
<area shape="rect" href="group__fdcan__file.html#ga004764aec240d40e03773129c6d8b734" title="Initialize allocation of transmit event block in CAN message RAM." alt="" coords="156,157,339,184"/>
<area shape="rect" href="group__fdcan__file.html#ga02e16aa4f82067b119e6c1262ffae476" title="Initialize size of data fields in reception buffers." alt="" coords="148,208,347,235"/>
<area shape="rect" href="group__fdcan__file.html#ga9d9b1dd105ee715c09d001534577f188" title="Initialize size of data fields in transmit buffers." alt="" coords="148,259,347,285"/>
<area shape="rect" href="fdcan__common_8c.html#af34ae07006b3a1e1b418e09f2b5f4792" title="Converts frame length to DLC value." alt="" coords="395,233,547,260"/>
</map>
</div>

</div>
</div>
<a id="gae1d9e017700d67ce1438f5a1b48be86c" name="gae1d9e017700d67ce1438f5a1b48be86c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae1d9e017700d67ce1438f5a1b48be86c">&#9670;&nbsp;</a></span>fdcan_transmit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int fdcan_transmit </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>canport</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>ext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>rtr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>fdcan_fmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>btr_switch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Transmit Message using FDCAN. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">canport</td><td>CAN block register base. See <a class="el" href="group__fdcan__block.html">FDCAN block base addresses</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">id</td><td>Message ID </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ext</td><td>Extended message ID </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">rtr</td><td>Request transmit </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fdcan_fmt</td><td>Use FDCAN format </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">btr_switch</td><td>Switch bitrate for data portion of frame </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">length</td><td>Message payload length. Must be valid CAN or FDCAN frame length </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">data</td><td>Message payload data </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int 0, 1 or 2 on success and depending on which outgoing mailbox got selected. Otherwise returns error code. For error codes, see <a class="el" href="group__fdcan__error.html">FDCAN error return values</a>. </dd></dl>

<p class="definition">Definition at line <a class="el" href="fdcan__common_8c_source.html#l00486">486</a> of file <a class="el" href="fdcan__common_8c_source.html">fdcan_common.c</a>.</p>

<p class="reference">References <a class="el" href="fdcan_8h_source.html#l00694">fdcan_tx_buffer_element::data</a>, <a class="el" href="fdcan_8h_source.html#l00692">fdcan_tx_buffer_element::evt_fmt_dlc_res</a>, <a class="el" href="fdcan_8h_source.html#l00746">FDCAN_E_BUSY</a>, <a class="el" href="fdcan_8h_source.html#l00742">FDCAN_E_INVALID</a>, <a class="el" href="fdcan_8h_source.html#l00705">FDCAN_FIFO_BRS</a>, <a class="el" href="fdcan_8h_source.html#l00714">FDCAN_FIFO_DLC_SHIFT</a>, <a class="el" href="fdcan_8h_source.html#l00709">FDCAN_FIFO_EID_MASK</a>, <a class="el" href="fdcan_8h_source.html#l00708">FDCAN_FIFO_EID_SHIFT</a>, <a class="el" href="fdcan_8h_source.html#l00704">FDCAN_FIFO_FDF</a>, <a class="el" href="fdcan_8h_source.html#l00702">FDCAN_FIFO_RTR</a>, <a class="el" href="fdcan_8h_source.html#l00712">FDCAN_FIFO_SID_MASK</a>, <a class="el" href="fdcan_8h_source.html#l00711">FDCAN_FIFO_SID_SHIFT</a>, <a class="el" href="fdcan_8h_source.html#l00701">FDCAN_FIFO_XTD</a>, <a class="el" href="fdcan__common_8c_source.html#l00085">fdcan_get_free_txbuf()</a>, <a class="el" href="fdcan__common_8c_source.html#l00178">fdcan_get_txbuf_addr()</a>, <a class="el" href="fdcan__common_8c_source.html#l00197">fdcan_length_to_dlc()</a>, <a class="el" href="h7_2fdcan_8h_source.html#l00072">FDCAN_TXBAR</a>, and <a class="el" href="fdcan_8h_source.html#l00689">fdcan_tx_buffer_element::identifier_flags</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__fdcan__file_gae1d9e017700d67ce1438f5a1b48be86c_cgraph.png" border="0" usemap="#agroup__fdcan__file_gae1d9e017700d67ce1438f5a1b48be86c_cgraph" alt=""/></div>
<map name="agroup__fdcan__file_gae1d9e017700d67ce1438f5a1b48be86c_cgraph" id="agroup__fdcan__file_gae1d9e017700d67ce1438f5a1b48be86c_cgraph">
<area shape="rect" title="Transmit Message using FDCAN." alt="" coords="5,56,125,83"/>
<area shape="rect" href="fdcan__common_8c.html#a2beb314599de4ada79e9d6dd97d7bde8" title="Return ID of next free Tx buffer." alt="" coords="175,5,335,32"/>
<area shape="rect" href="fdcan__common_8c.html#a05a659efa6aa776cb798376333674338" title="Returns a pointer to an TX FIFO element in message RAM." alt="" coords="173,56,336,83"/>
<area shape="rect" href="fdcan__common_8c.html#af34ae07006b3a1e1b418e09f2b5f4792" title="Converts frame length to DLC value." alt="" coords="179,107,331,133"/>
<area shape="rect" href="group__fdcan__file.html#gaf61aace89b3ea31afd3614922ff591ca" title="Returns actual size of transmit entry in transmit queue/FIFO for given CAN port." alt="" coords="384,56,605,83"/>
<area shape="rect" href="fdcan__common_8c.html#a17446d188c22a8af68cc52f73471bb0a" title="Converts DLC value into frame payload length." alt="" coords="653,56,805,83"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Tue Mar 7 2023 16:11:56 for libopencm3 by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4 </li>
  </ul>
</div>
</body>
</html>
